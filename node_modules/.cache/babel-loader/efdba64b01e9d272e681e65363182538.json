{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { get, getDatabase, limitToFirst, orderByKey, query, ref, startAt } from \"firebase/database\";\nimport { useEffect, useState } from \"react\";\nexport default function useVideoList(page) {\n  _s();\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [videos, setVideos] = useState([]);\n  const [hasMore, setHasMore] = useState(true);\n  useEffect(() => {\n    async function fetchVideos() {\n      // database related works\n      const db = getDatabase();\n      const videosRef = ref(db, \"videos\");\n      const videoQuery = query(videosRef, orderByKey(), startAt(\"\" + page), limitToFirst(8));\n\n      try {\n        setError(false);\n        setLoading(true); // request firebase database\n\n        const snapshot = await get(videoQuery);\n        setLoading(false);\n\n        if (snapshot.exists()) {\n          setVideos(prevVideos => {\n            return [...prevVideos, ...Object.values(snapshot.val())];\n          });\n        } else {\n          setHasMore(false);\n        }\n      } catch (err) {\n        console.log(err);\n        setLoading(false);\n        setError(true);\n      }\n    }\n\n    fetchVideos();\n  }, [page]);\n  return {\n    loading,\n    error,\n    videos,\n    hasMore\n  };\n}\n\n_s(useVideoList, \"51k/9QOjAQqhJ3q4Ia+3VDiwqsQ=\");","map":{"version":3,"sources":["E:/hadi/react/react-quiz/src/hooks/useVideoList.js"],"names":["get","getDatabase","limitToFirst","orderByKey","query","ref","startAt","useEffect","useState","useVideoList","page","loading","setLoading","error","setError","videos","setVideos","hasMore","setHasMore","fetchVideos","db","videosRef","videoQuery","snapshot","exists","prevVideos","Object","values","val","err","console","log"],"mappings":";;AAAA,SACEA,GADF,EAEEC,WAFF,EAGEC,YAHF,EAIEC,UAJF,EAKEC,KALF,EAMEC,GANF,EAOEC,OAPF,QAQO,mBARP;AASA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,eAAe,SAASC,YAAT,CAAsBC,IAAtB,EAA4B;AAAA;;AACzC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBJ,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACK,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACO,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,IAAD,CAAtC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeY,WAAf,GAA6B;AAC3B;AACA,YAAMC,EAAE,GAAGnB,WAAW,EAAtB;AACA,YAAMoB,SAAS,GAAGhB,GAAG,CAACe,EAAD,EAAK,QAAL,CAArB;AACA,YAAME,UAAU,GAAGlB,KAAK,CACtBiB,SADsB,EAEtBlB,UAAU,EAFY,EAGtBG,OAAO,CAAC,KAAKI,IAAN,CAHe,EAItBR,YAAY,CAAC,CAAD,CAJU,CAAxB;;AAOA,UAAI;AACFY,QAAAA,QAAQ,CAAC,KAAD,CAAR;AACAF,QAAAA,UAAU,CAAC,IAAD,CAAV,CAFE,CAGF;;AACA,cAAMW,QAAQ,GAAG,MAAMvB,GAAG,CAACsB,UAAD,CAA1B;AACAV,QAAAA,UAAU,CAAC,KAAD,CAAV;;AACA,YAAIW,QAAQ,CAACC,MAAT,EAAJ,EAAuB;AACrBR,UAAAA,SAAS,CAAES,UAAD,IAAgB;AACxB,mBAAO,CAAC,GAAGA,UAAJ,EAAgB,GAAGC,MAAM,CAACC,MAAP,CAAcJ,QAAQ,CAACK,GAAT,EAAd,CAAnB,CAAP;AACD,WAFQ,CAAT;AAGD,SAJD,MAIO;AACLV,UAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,OAbD,CAaE,OAAOW,GAAP,EAAY;AACZC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAjB,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AACF;;AAEDK,IAAAA,WAAW;AACZ,GAjCQ,EAiCN,CAACT,IAAD,CAjCM,CAAT;AAmCA,SAAO;AACLC,IAAAA,OADK;AAELE,IAAAA,KAFK;AAGLE,IAAAA,MAHK;AAILE,IAAAA;AAJK,GAAP;AAMD;;GA/CuBR,Y","sourcesContent":["import {\r\n  get,\r\n  getDatabase,\r\n  limitToFirst,\r\n  orderByKey,\r\n  query,\r\n  ref,\r\n  startAt,\r\n} from \"firebase/database\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function useVideoList(page) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const [videos, setVideos] = useState([]);\r\n  const [hasMore, setHasMore] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function fetchVideos() {\r\n      // database related works\r\n      const db = getDatabase();\r\n      const videosRef = ref(db, \"videos\");\r\n      const videoQuery = query(\r\n        videosRef,\r\n        orderByKey(),\r\n        startAt(\"\" + page),\r\n        limitToFirst(8)\r\n      );\r\n\r\n      try {\r\n        setError(false);\r\n        setLoading(true);\r\n        // request firebase database\r\n        const snapshot = await get(videoQuery);\r\n        setLoading(false);\r\n        if (snapshot.exists()) {\r\n          setVideos((prevVideos) => {\r\n            return [...prevVideos, ...Object.values(snapshot.val())];\r\n          });\r\n        } else {\r\n          setHasMore(false);\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n        setLoading(false);\r\n        setError(true);\r\n      }\r\n    }\r\n\r\n    fetchVideos();\r\n  }, [page]);\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    videos,\r\n    hasMore,\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}